import { hashPassword } from "@/server/auth/password";
import { getDefaultInterviewPlan } from "@/lib/interview-plan";
import type { AuthUserRecord } from "@/types/auth";
import type { Candidate, Job, SyncLog } from "@/types/domain";

const now = Date.now();

const daysAgo = (days: number): string => new Date(now - days * 86_400_000).toISOString();

export const seedUsers: AuthUserRecord[] = [
  {
    id: "user-admin-001",
    email: "admin@talentlens.local",
    fullName: "Aarav Admin",
    role: "ADMIN",
    passwordHash: hashPassword("Admin@12345"),
    isActive: true,
    createdAt: daysAgo(40),
    updatedAt: daysAgo(2),
  },
  {
    id: "user-recruiter-001",
    email: "recruiter@talentlens.local",
    fullName: "Riya Recruiter",
    role: "RECRUITER",
    passwordHash: hashPassword("Recruiter@123"),
    isActive: true,
    createdAt: daysAgo(35),
    updatedAt: daysAgo(1),
  },
  {
    id: "user-interviewer-001",
    email: "interviewer1@talentlens.local",
    fullName: "Kavya Nair",
    role: "INTERVIEWER",
    passwordHash: hashPassword("Interviewer@123"),
    isActive: true,
    createdAt: daysAgo(25),
    updatedAt: daysAgo(1),
  },
  {
    id: "user-interviewer-002",
    email: "interviewer2@talentlens.local",
    fullName: "Rahul Verma",
    role: "INTERVIEWER",
    passwordHash: hashPassword("Interviewer@123"),
    isActive: true,
    createdAt: daysAgo(25),
    updatedAt: daysAgo(1),
  },
  {
    id: "user-hm-001",
    email: "hm@talentlens.local",
    fullName: "Maya Singh",
    role: "HIRING_MANAGER",
    passwordHash: hashPassword("Manager@123"),
    isActive: true,
    createdAt: daysAgo(22),
    updatedAt: daysAgo(2),
  },
];

export const seedJobs: Job[] = [
  {
    id: "job-frontend-001",
    title: "Senior Frontend Engineer",
    department: "Engineering",
    description: "Own core frontend architecture and mentor engineers.",
    coreResponsibilities: [
      "Own the frontend architecture for core product surfaces.",
      "Mentor engineers on React patterns, testing, and performance.",
      "Collaborate with product and design on deliverable planning.",
    ],
    interviewPlan: getDefaultInterviewPlan(),
    requiredSkills: ["React", "Next.js", "TypeScript", "Testing"],
    experienceMin: 4,
    experienceMax: 8,
    status: "OPEN",
    createdById: "user-admin-001",
    createdAt: daysAgo(25),
    updatedAt: daysAgo(3),
  },
  {
    id: "job-backend-001",
    title: "Backend Engineer",
    department: "Engineering",
    description: "Design resilient APIs and improve platform performance.",
    coreResponsibilities: [
      "Design and maintain resilient APIs for product domains.",
      "Improve query performance and service reliability.",
      "Drive observability and incident response best practices.",
    ],
    interviewPlan: getDefaultInterviewPlan(),
    requiredSkills: ["Node.js", "PostgreSQL", "System Design"],
    experienceMin: 3,
    experienceMax: 7,
    status: "OPEN",
    createdById: "user-admin-001",
    createdAt: daysAgo(19),
    updatedAt: daysAgo(5),
  },
  {
    id: "job-devops-001",
    title: "DevOps Engineer",
    department: "Platform",
    description: "Scale CI/CD and cloud operations for product teams.",
    coreResponsibilities: [
      "Scale CI/CD workflows for multi-team deployments.",
      "Automate cloud infrastructure provisioning and drift checks.",
      "Improve platform reliability, alerts, and runbooks.",
    ],
    interviewPlan: getDefaultInterviewPlan(),
    requiredSkills: ["Docker", "Kubernetes", "Terraform"],
    experienceMin: 3,
    experienceMax: 6,
    status: "OPEN",
    createdById: "user-admin-001",
    createdAt: daysAgo(12),
    updatedAt: daysAgo(2),
  },
];

export const seedCandidates: Candidate[] = [
  {
    id: "cand-001",
    fullName: "Priya Sharma",
    email: "priya.sharma@example.com",
    phone: "+91 9876543210",
    currentRole: "Senior Frontend Developer",
    currentCompany: "Infosys",
    totalExperienceYrs: 4.5,
    skills: ["React", "TypeScript", "Next.js", "CSS"],
    resumeUrl: "https://example.com/resumes/priya-sharma.pdf",
    resumeRawText: "Experienced frontend engineer with React and TypeScript.",
    linkedinUrl: "https://linkedin.com/in/priya-sharma",
    source: "LINKEDIN",
    currentStage: "TECHNICAL_L1",
    stageUpdatedAt: daysAgo(3),
    jobId: "job-frontend-001",
    recruiterId: "user-recruiter-001",
    notes: "Strong UI architecture background.",
    createdAt: daysAgo(14),
    updatedAt: daysAgo(3),
    rounds: [
      {
        id: "round-001",
        candidateId: "cand-001",
        roundNumber: 1,
        roundType: "SCREENING",
        interviewerId: "user-interviewer-001",
        interviewerName: "Kavya Nair",
        scheduledAt: daysAgo(6),
        status: "COMPLETED",
        createdAt: daysAgo(8),
        updatedAt: daysAgo(6),
        feedback: {
          id: "feedback-001",
          roundId: "round-001",
          interviewerId: "user-interviewer-001",
          technicalRating: 4,
          communicationRating: 4,
          problemSolvingRating: 4,
          cultureFitRating: 5,
          overallRating: 4,
          strengthsText: "Structured thought process and strong React foundations.",
          improvementText: "Could improve API error-handling examples.",
          recommendation: "YES",
          submittedAt: daysAgo(6),
        },
      },
    ],
    rejection: null,
  },
  {
    id: "cand-002",
    fullName: "Arjun Menon",
    email: "arjun.menon@example.com",
    phone: "+91 9988776655",
    currentRole: "Backend Engineer",
    currentCompany: "TCS",
    totalExperienceYrs: 6,
    skills: ["Node.js", "PostgreSQL", "Redis", "Docker"],
    resumeUrl: "https://example.com/resumes/arjun-menon.pdf",
    resumeRawText: "Backend engineer with distributed systems focus.",
    linkedinUrl: "https://linkedin.com/in/arjun-menon",
    source: "REFERRAL",
    currentStage: "SCREENING",
    stageUpdatedAt: daysAgo(1),
    jobId: "job-backend-001",
    recruiterId: "user-recruiter-001",
    notes: null,
    createdAt: daysAgo(9),
    updatedAt: daysAgo(1),
    rounds: [],
    rejection: null,
  },
  {
    id: "cand-003",
    fullName: "Neha Kapoor",
    email: "neha.kapoor@example.com",
    phone: "+91 9123456780",
    currentRole: "DevOps Engineer",
    currentCompany: "Wipro",
    totalExperienceYrs: 3,
    skills: ["Kubernetes", "Terraform", "AWS", "Linux"],
    resumeUrl: "https://example.com/resumes/neha-kapoor.pdf",
    resumeRawText: "DevOps engineer focused on cloud automation.",
    linkedinUrl: "https://linkedin.com/in/neha-kapoor",
    source: "JOB_BOARD",
    currentStage: "APPLIED",
    stageUpdatedAt: daysAgo(5),
    jobId: "job-devops-001",
    recruiterId: "user-recruiter-001",
    notes: "Good Terraform depth.",
    createdAt: daysAgo(7),
    updatedAt: daysAgo(5),
    rounds: [],
    rejection: null,
  },
  {
    id: "cand-004",
    fullName: "Rohan Das",
    email: "rohan.das@example.com",
    phone: "+91 9000011111",
    currentRole: "Frontend Developer",
    currentCompany: "StartupX",
    totalExperienceYrs: 2.8,
    skills: ["React", "JavaScript", "Tailwind CSS"],
    resumeUrl: "https://example.com/resumes/rohan-das.pdf",
    resumeRawText: "Frontend developer with focus on design systems.",
    linkedinUrl: null,
    source: "DIRECT_APPLICATION",
    currentStage: "REJECTED",
    stageUpdatedAt: daysAgo(2),
    jobId: "job-frontend-001",
    recruiterId: "user-recruiter-001",
    notes: "Rejected after technical round.",
    createdAt: daysAgo(16),
    updatedAt: daysAgo(2),
    rounds: [
      {
        id: "round-004",
        candidateId: "cand-004",
        roundNumber: 1,
        roundType: "SCREENING",
        interviewerId: "user-interviewer-002",
        interviewerName: "Rahul Verma",
        scheduledAt: daysAgo(4),
        status: "COMPLETED",
        createdAt: daysAgo(5),
        updatedAt: daysAgo(4),
        feedback: {
          id: "feedback-004",
          roundId: "round-004",
          interviewerId: "user-interviewer-002",
          technicalRating: 2,
          communicationRating: 3,
          problemSolvingRating: 2,
          cultureFitRating: 3,
          overallRating: 2,
          strengthsText: "Positive attitude and quick learner.",
          improvementText: "Needs stronger problem decomposition and state handling.",
          recommendation: "NO",
          submittedAt: daysAgo(4),
        },
      },
    ],
    rejection: {
      id: "rej-004",
      candidateId: "cand-004",
      feedbackId: "feedback-004",
      category: "TECHNICAL_GAP",
      notes: "Did not meet expected depth in hooks, rendering flow, and testing strategy.",
      createdAt: daysAgo(2),
    },
  },
];

export const seedSyncLogs: SyncLog[] = [];
